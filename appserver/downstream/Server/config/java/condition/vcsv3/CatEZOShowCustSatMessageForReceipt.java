/* * CatShowCustSatMessageForReceipt.java * Created by Kingshuk on Nov 01, 2006 * */package config.java.condition.vcsv3;
import ariba.approvable.core.Approvable;import ariba.approvable.core.Comment;import ariba.base.fields.Condition;import ariba.base.fields.ConditionEvaluationException;import ariba.base.fields.ValueInfo;import ariba.util.core.ListUtil;import ariba.util.core.PropertyTable;import ariba.util.log.Log;/* * Condition: returns true for the Comment associated Clusterroot is Receipt * -- else returns true */public class CatEZOShowCustSatMessageForReceipt extends Condition {    private static final String classname = "CatEZOShowCustSatMessageForReceipt: ";    private static final ValueInfo parameterInfo[] = { new ValueInfo("ApprovableType", IsScalar, "java.lang.String") };    private static final String requiredParameterNames[] = { "ApprovableType" };
    public boolean evaluate(Object object, PropertyTable params) throws ConditionEvaluationException {        String apprToHideField = (String)params.getPropertyForKey("ApprovableType");        Log.customer.debug("%s**approvable to hide this comment field == %s", classname,apprToHideField);        Log.customer.debug("%s**object got="+object+"", classname);        if(object !=null ){            Comment comment = (Comment)object;            Log.customer.debug("%s**comment got="+comment+"", classname);            Approvable approvable = (Approvable)comment.getClusterRoot();            if(approvable == null) {                java.util.List approvables = comment.getFutureParents();                if(approvables != null)                    approvable = (Approvable)ListUtil.firstElement(approvables);                	Log.customer.debug("%s**approvable (futureparernt) this comment belongs="+approvable+"", classname);            }            Log.customer.debug("%s**approvable this comment belongs="+approvable+"", classname);            if(approvable != null) {                String apprTypeName = approvable.getTypeName();                // Log.customer.debug("%s**approvable name=%s", classname, apprTypeName);                if (apprTypeName.equals(apprToHideField)) {					if ( ( approvable.getPartition().getName() ).equals("ezopen"))
					{
                    	Log.customer.debug("%s**Returning true for = %s for Partition %s", classname, apprToHideField, approvable.getPartition().getName());                    	return true;					}
                }            }        }        return false;    }    public CatEZOShowCustSatMessageForReceipt() {        super();    }    protected ValueInfo[] getParameterInfo() {            return parameterInfo;    }    protected String[] getRequiredParameterNames()  {        return requiredParameterNames;    }}